#!/bin/bash
set -e

check_installed() {
    command -v cargo &>/dev/null
}

install() {
    if command -v rustc &>/dev/null && command -v cargo &>/dev/null; then
        echo "Rust already installed: $(rustc --version)"
        return
    fi

    echo "Installing Rust via rustup..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
}

configure() {
    # PATH managed in shell config (~/.cargo/bin is added by rustup)
    :
}

update() {
    if command -v rustup &>/dev/null; then
        echo "Updating Rust toolchain..."
        rustup update
    fi
}

# Main (only run when executed directly, not when sourced)
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    install
    configure
fi
